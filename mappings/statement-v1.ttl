@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix crdt: <https://kkalass.github.io/solid_crdt_sync/vocab/crdt#> .
@prefix sync: <https://kkalass.github.io/solid_crdt_sync/vocab/sync#> .
@prefix mappings: <https://kkalass.github.io/solid_crdt_sync/mappings/> .

# Merge contract for RDF reified statements used as tombstones in CRDT sets
# This contract defines how to merge tombstone statements that mark deleted triples

mappings:statement-v1 a sync:ClassMapping;
   sync:appliesToClass rdf:Statement;
   sync:propertyMapping
     # The subject, predicate, and object of the reified statement are immutable identifiers
     [ sync:property rdf:subject; crdt:mergeWith crdt:LWW_Register ],
     [ sync:property rdf:predicate; crdt:mergeWith crdt:LWW_Register ],
     [ sync:property rdf:object; crdt:mergeWith crdt:LWW_Register ],
     
     # The deletion marker uses LWW semantics - once deleted, stays deleted
     # (Though in practice, tombstones rarely conflict since they're created atomically)
     [ sync:property crdt:isDeleted; crdt:mergeWith crdt:LWW_Register ] .