## 3. Architecture Overview

This section provides a high-level view of the framework's approach before diving into technical foundations. Understanding these key architectural decisions helps contextualize the detailed mechanisms that follow.

### 3.1. The Problem

Distributed RDF data synchronization faces three fundamental challenges:

**Challenge 1: Conflict-Free Merging**  
Multiple applications writing to the same RDF resources create conflicts that must be resolved deterministically without coordination. Traditional "last-write-wins" approaches lose data and break semantic relationships.

**Challenge 2: Semantic Preservation**  
RDF's semantic richness must be preserved during synchronization. Merge strategies must understand property semantics (single-value vs multi-value, immutable vs collaborative) rather than treating all data uniformly.

**Challenge 3: Passive Storage Integration**  
Solid Pods are passive storage - they cannot execute merge logic or coordinate between clients. All conflict resolution must happen client-side while ensuring convergent results across all installations.

### 3.2. The Solution Approach

The framework addresses these challenges through a **state-based CRDT architecture** with three key innovations:

**State-Based CRDT Model:**  
Instead of synchronizing individual operations, entire resource states are merged using property-specific CRDT algorithms. This approach works naturally with passive storage and enables rich semantic merge strategies.

**Declarative Merge Contracts:**  
Developers define merge behavior by linking each property to appropriate CRDT types (LWW-Register for names, OR-Set for keywords, Immutable for structural data). These contracts are public and discoverable, enabling cross-application interoperability.

**Four-Layer Architecture:**  
1. **Data Resource Layer**: Clean RDF using standard vocabularies
2. **Merge Contract Layer**: Public CRDT rules for conflict resolution  
3. **Indexing Layer**: Performance optimization through sharded indices
4. **Sync Strategy Layer**: Application-controlled synchronization patterns

### 3.3. Key Architectural Decisions

Several critical design decisions shape the framework's behavior:

**Hybrid Logical Clocks for Causality:**  
Combines logical causality tracking (tamper-proof) with physical timestamps (intuitive tie-breaking). This provides both theoretical soundness and user-friendly "most recent wins" behavior for concurrent operations.

**Blank Node Context Identification:**  
RDF blank nodes gain stable identity through context + identifying properties, enabling CRDT operations that require object identity (OR-Set tombstones, etc.) while preserving RDF semantics.

**Discovery Isolation Strategy:**  
CRDT-managed resources register as `sync:ManagedDocument` rather than semantic types, protecting them from incompatible applications while enabling framework-aware collaboration.

**Document-Level Sync with Resource-Level Semantics:**  
Synchronization operates on complete documents for atomic consistency, while indexing and APIs work with individual resources for developer intuition.

### 3.4. Reading Guide

The remainder of this document provides detailed technical foundations and implementation guidance:

- **Section 4 (Foundations)**: Technical mechanisms that enable the architecture
- **Section 5 (Four-Layer Architecture)**: Detailed explanation of each architectural layer  
- **Section 6 (Lifecycle Management)**: Practical Pod setup and operational procedures
- **Appendices**: Implementation specifications and error handling patterns (see [ERROR-HANDLING.md](ERROR-HANDLING.md) for comprehensive resilience strategies)

**For Different Audiences:**
- **Architects/Decision Makers**: Sections 1-3 provide sufficient overview for technology decisions
- **Application Developers**: Add Section 5 for understanding the development model
- **Library Implementers**: Full document provides complete technical specification

**Transitioning to Implementation Details**: While the previous sections established the conceptual framework and architectural decisions, the following sections dive into the specific technical mechanisms that make this architecture work. Understanding these foundations is essential for implementing the framework correctly, particularly the CRDT algorithms, RDF identity resolution, and synchronization protocols that enable conflict-free collaboration.
