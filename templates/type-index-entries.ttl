@prefix solid: <http://www.w3.org/ns/solid/terms#> .
@prefix sync: <https://kkalass.github.io/solid_crdt_sync/vocab/sync#> .
@prefix idx: <https://kkalass.github.io/solid_crdt_sync/vocab/idx#> .
@prefix crdt: <https://kkalass.github.io/solid_crdt_sync/vocab/crdt#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Template for Type Index entries required by the framework
# These registrations enable discovery of system indices and installation documents
# Placeholders: {INSTALLATION_CONTAINER_URI}, {FRAMEWORK_INDEX_CONTAINER_URI}

# Framework retention policies (global defaults)
<> crdt:resourceTombstoneRetentionPeriod "P2Y"^^xsd:duration;
   crdt:enableResourceTombstoneCleanup true;
   crdt:propertyTombstoneRetentionPeriod "P6M"^^xsd:duration;
   crdt:enablePropertyTombstoneCleanup true;
   crdt:maxInactivityPeriod "P6M"^^xsd:duration;

   # Client installation documents registration
   solid:hasRegistration [
      a solid:TypeRegistration;
      solid:forClass sync:ManagedDocument;
      sync:managedResourceType crdt:ClientInstallation;
      solid:instanceContainer <{INSTALLATION_CONTAINER_URI}>
   ];

   # Framework garbage collection index registration  
   solid:hasRegistration [
      a solid:TypeRegistration;
      solid:forClass idx:GroupIndexTemplate;
      solid:instanceContainer <{FRAMEWORK_INDEX_CONTAINER_URI}>;
      idx:indexesClass crdt:ClientInstallation;
      # Override: Keep installation tombstones longer for audit trails
      crdt:resourceTombstoneRetentionPeriod "P3Y"^^xsd:duration
   ];

   # Framework installation index registration
   solid:hasRegistration [
      a solid:TypeRegistration; 
      solid:forClass idx:FullIndex;
      solid:instanceContainer <{FRAMEWORK_INDEX_CONTAINER_URI}>;
      idx:indexesClass crdt:ClientInstallation
   ] .