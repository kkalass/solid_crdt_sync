@prefix solid: <http://www.w3.org/ns/solid/terms#> .
@prefix sync: <https://kkalass.github.io/solid_crdt_sync/vocab/sync#> .
@prefix idx: <https://kkalass.github.io/solid_crdt_sync/vocab/idx#> .
@prefix crdt: <https://kkalass.github.io/solid_crdt_sync/vocab/crdt-mechanics#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Template for Type Index entries required by the framework
# These registrations enable discovery of system indices and installation documents
# Placeholders: {INSTALLATION_CONTAINER_URI}, {FRAMEWORK_INDEX_CONTAINER_URI}

# Framework retention policies (global defaults)
<> crdt:documentTombstoneRetentionPeriod "P1Y"^^xsd:duration;
   crdt:enableDocumentTombstoneCleanup true;
   crdt:propertyTombstoneRetentionPeriod "P6M"^^xsd:duration;
   crdt:enablePropertyTombstoneCleanup true;
   crdt:maxInactivityPeriod "P6M"^^xsd:duration;

   # Client installation documents registration
   solid:hasRegistration [
      a solid:TypeRegistration;
      solid:forClass sync:ManagedDocument;
      sync:managedResourceType crdt:ClientInstallation;
      solid:instanceContainer <{INSTALLATION_CONTAINER_URI}>
      # Override: Keep installation document tombstones longer for audit trails
      crdt:documentTombstoneRetentionPeriod "P2Y"^^xsd:duration
   ];

   # Client installation documents index registration
   solid:hasRegistration [
      a solid:TypeRegistration; 
      solid:forClass idx:FullIndex;
      solid:instanceContainer <{FRAMEWORK_INDEX_CONTAINER_URI}>;
      idx:indexesClass crdt:ClientInstallation
   ];

   # Framework garbage collection index registration  
   solid:hasRegistration [
      a solid:TypeRegistration;
      solid:forClass idx:GroupIndexTemplate;
      solid:instanceContainer <{FRAMEWORK_INDEX_CONTAINER_URI}>;
      # Garbage collection tracks specific document types that can be deleted
      idx:indexesClass sync:ManagedDocument, idx:FullIndex, idx:GroupIndex, idx:GroupIndexTemplate, idx:Shard;
   ].